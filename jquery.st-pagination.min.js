/* jQuery ST-Pagination v0.0.3
   Generated on 2013-10-23 at 18:53:23 */

!function(a){"use strict";var b=":p",c={initialize:function(c){return c=c||{},this.each(function(){var d=a(this),e={};if(e.url=c.url||d.data("url")||"?p="+b,e.type=c.type||d.data("type")||"page",e.start=c.start||parseInt(d.data("start"),10)||1,e.page=e.start+1,c.selectors=c.selectors||{},e.selectors={items:c.selectors.items||".st-items",next:c.selectors.next||".st-next"},e.selectors.item=c.selectors.item||e.selectors.items+" > *","skip"===e.type&&(e.skip=c.skip||parseInt(d.data("skip"),10)||e.start+d.find(e.selectors.items).length),e.selector="#"+d.attr("id"),e.cache={next:null},c.events)for(var f in c.events)if(c.events.hasOwnProperty(f)){var g=c.events[f];d.on(f,g)}d.addClass("initialized"),d.data("st-pagination",e),d.stPagination("checkNext"),d.on("click.st-pagination",e.selectors.next,function(a){a.preventDefault(),d.is(".loading")||d.is(".complete")||d.stPagination("next")})})},next:function(){return this.each(function(){var b=a(this),c=b.data("st-pagination");b.find(c.selectors.items+":first").append(c.cache.next),c.skip+=c.cache.next.length,c.page++,b.stPagination("checkNext"),b.trigger("next",b)})},checkNext:function(){return this.each(function(){var b=a(this),c=b.data("st-pagination"),d=c[c.type],e=c.url.replace(":p",d),f=e+" "+c.selector+" "+c.selectors.item;b.addClass("loading"),a("<div />").load(f,function(){c.cache.next=a(this).children(),b.removeClass("loading").toggleClass("complete",0===c.cache.next.length),0===c.cache.next.length&&b.trigger("complete",b)})})},destroy:function(){var b=a(this);b.off(".st-pagination"),b.removeData()}};a.fn.stPagination=function(a){return c[a]?c[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void 0:c.initialize.apply(this,arguments)}}(jQuery);